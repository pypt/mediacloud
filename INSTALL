These are very brief, likely incomplete, installation instructions.  If you
want to install the system, follow these instructions as they are and
send any questions to info@mediacloud.org.

These instructions assume comfort with postgresql and especially with perl. You
may have a difficult time installing the system if you do not have experience
with perl and cpan.

NOTE: THESE INSTRUCTIONS HAVE ONLY BEEN TESTED ON UBUNTU LINUX. We recommend using Ubuntu 11.10 (Oneiric) or later. Earlier versions may be missing some of the necessary packages. Additionally mediacloud requires a 64 bit OS.

NOTE: We recommend you create a new user to run and install Media Cloud. These instructions assume that the user running media cloud does not already have Perlbrew installed. Creating a new user is the safest way to ensure this is the case.

QUICK START:

Most users can run the following commands from the Media Cloud root directory:
     sudo ./install_scripts/install_mediacloud_deb_package_dependencies.sh
     sudo ./install_scripts/create_default_db_user_and_databases.sh 
     cp  mediawords.yml.dist mediawords.yml
     sudo ./install_scripts/install_system_wide_modules_for_plpg_perl.sh
     ./install_mc_perlbrew_and_modules.sh
     ./script/run_carton.sh  exec -Ilib/ -- prove -r t/compile.t
     ./script/run_with_carton.sh ./script/mediawords_create_db.pl

Users who are really impatient can just run a single script to execute to those commands. By running ./install.sh from the Media Cloud root directory:

     ./install.sh


Detailed install:


* Install the necessary Ubuntu deb packages. From the mediacloud root directory run:

  sudo ./install_scripts/install_mediacloud_deb_package_dependencies.sh

This will install Postgresql 8.4 and a number of system libraries needed by CPAN modules.

* Create the default Postgresql user and databases for mediacloud. From the mediacloud root directory run:

  sudo ./install_scripts/create_default_db_user_and_databases.sh 

This will create a Postgresql user called 'mediaclouduser' and two databases owned by this user: mediacloud and mediacloud_test.

* Copy mediawords.yml.dist to mediawords.yml.

* SECURITY NOTE: The Postgresql user created above has a default Postgresql password and will have administrative access to Postgresql. These instructions assume that these instructions assume mediacloud is being installed on a system with firewalls that prevent remote access to Postgresql and that the local users are trustworthy. If you wish to change the password of the Postgresql mediaclouduser in Postgresql you will also need to edit mediawords.yml.

* Optional: Update the database section in mediawords.yml. Most users can skip this step and use the defaults. However, if you have changed the password of the Postgresql mediaclouduser or if you have a custom database setup you must update mediawords.yml. NOTE: The label field for the test database must be 'test' and the test database must be listed after the main database.

* OPTIONAL: Edit the other sections of mediawords.yml to suit your local
  configuration.  NOTE THAT if you uncomment a suboption, you also need to uncomment the parent option.  For example, if you uncomment 'default_tag_module', you should also uncomment 'mediawords'.
  
* OPTIONAL: If you want to use calais tagging, you'll need to apply for a calais key 
  and enter the key into mediawords.yml.  Then change 'NYTTopics' for the
  default_tag_modules setting to 'NYTTopics Calais',

* Install system wide Perl modules that are needed for the pg/plperl stored procedures by CDing to the directory where mediacloud is located and running the following command script:
     sudo ./install_scripts/install_system_wide_modules_for_plpg_perl.sh 

*  Run the install_mc_perlbrew_and_modules.sh script. This scripts installs Perlbrew, carton and the required modules. I.E. simply CD to the base directory of mediacloud and run the following. Note that the script will take a long time to complete:
     ./install_mc_perlbrew_and_modules.sh

NOTE this script will fail if you aren't running a 64 bit OS.

* SUGGESTED: Verify that the necessary modules are installed. Run the media cloud coverage test to verify that all required modules have been installed. Run:

      ./script/run_carton.sh  exec -Ilib/ -- prove -r t/compile.t

If there are errors determine which modules are missing and install them by running carton install.

* Make sure that the directory in which Media Cloud is located can be read by the postgres user. Run something like the following:
      chmod +rx ~/

* Run the following:
    ./script/run_with_carton.sh ./script/mediawords_create_db.pl

  This will create create the necessary database tables and procedures within the database you specified above.  Answer 'yes' at the prompt since the database you created above should be empty.
  
* Run ./script/run_plackup_with_carton.sh.  This should start up the web server.
  If the command line returns no errors, go to http://localhost:5000 
  (or replace localhost with whatever host the system is on) to
  access the server.
  
* THE doc/ DIRECTORY CONTAINS ADDITIONAL DOCUMENTATION. Refer to the README files in that directory for more information.

* Perform brilliant analysis, fix our broken code, document how the system
  works, and otherwise contribute to the project.
